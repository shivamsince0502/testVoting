"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isCacheModified = exports.saveCache = exports.getCache = exports.setCache = exports.resetCache = void 0;
const global_1 = require("../../../config/global");
const logger_1 = require("../../../logger");
const null_1 = require("./impl/null");
// This will be overwritten with initRepoCache()
// Used primarily as a placeholder and for testing
let repoCache = new null_1.RepoCacheNull();
function resetCache() {
    setCache(new null_1.RepoCacheNull());
}
exports.resetCache = resetCache;
function setCache(cache) {
    repoCache = cache;
}
exports.setCache = setCache;
function getCache() {
    return repoCache.getData();
}
exports.getCache = getCache;
async function saveCache() {
    if (global_1.GlobalConfig.get('dryRun')) {
        logger_1.logger.info(`DRY-RUN: Would save repository cache.`);
    }
    else {
        await repoCache.save();
    }
}
exports.saveCache = saveCache;
function isCacheModified() {
    return repoCache.isModified();
}
exports.isCacheModified = isCacheModified;
//# sourceMappingURL=index.js.map