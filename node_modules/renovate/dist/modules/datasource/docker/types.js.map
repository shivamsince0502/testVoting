{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../../lib/modules/datasource/docker/types.ts"],"names":[],"mappings":"","sourcesContent":["/**\n * Media Types\n * https://docs.docker.com/registry/spec/manifest-v2-2/#media-types\n * https://github.com/opencontainers/image-spec/blob/main/media-types.md\n */\nexport type MediaType =\n  | 'application/vnd.docker.distribution.manifest.v1+json' // manifestV1\n  | 'application/vnd.docker.distribution.manifest.v2+json' // manifestV2\n  | 'application/vnd.docker.distribution.manifest.list.v2+json' // manifestListV2\n  | 'application/vnd.oci.image.manifest.v1+json' // ociManifestV1\n  | 'application/vnd.oci.image.index.v1+json'; // ociManifestIndexV1\n\nexport interface MediaObject {\n  readonly digest: string;\n  readonly mediaType: MediaType;\n  readonly size: number;\n}\n\nexport interface ImageListImage extends MediaObject {\n  readonly mediaType:\n    | 'application/vnd.docker.distribution.manifest.v1+json'\n    | 'application/vnd.docker.distribution.manifest.v2+json';\n\n  readonly platform: OciPlatform;\n}\n\n/**\n * Manifest List\n * https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list-field-descriptions\n */\nexport interface ImageList {\n  readonly schemaVersion: 2;\n  readonly mediaType: 'application/vnd.docker.distribution.manifest.list.v2+json';\n  readonly manifests: ImageListImage[];\n}\n\n/**\n * Image Manifest\n * https://docs.docker.com/registry/spec/manifest-v2-2/#image-manifest\n */\nexport interface Image extends MediaObject {\n  readonly schemaVersion: 2;\n  readonly mediaType: 'application/vnd.docker.distribution.manifest.v2+json';\n  readonly config: MediaObject;\n}\n\n/**\n * OCI platform properties\n * https://github.com/opencontainers/image-spec/blob/main/image-index.md\n */\nexport interface OciPlatform {\n  architecture?: string;\n  features?: string[];\n  os?: string;\n  'os.features'?: string[];\n  'os.version'?: string;\n  variant?: string;\n}\n\n/**\n * OCI content descriptor\n * https://github.com/opencontainers/image-spec/blob/main/descriptor.md\n */\nexport interface OciDescriptor {\n  readonly mediaType?: MediaType;\n  readonly digest: string;\n  readonly size: number;\n  readonly urls: string[];\n  readonly annotations: Record<string, string>;\n}\n\n/**\n * OCI Image Manifest\n * The same structure as docker image manifest, but mediaType is not required and is not present in the wild.\n * https://github.com/opencontainers/image-spec/blob/main/manifest.md\n */\nexport interface OciImage {\n  readonly schemaVersion: 2;\n  readonly mediaType?: 'application/vnd.oci.image.manifest.v1+json';\n  readonly config: OciDescriptor;\n  readonly layers: OciDescriptor[];\n  readonly annotations: Record<string, string>;\n}\n\nexport interface OciImageListManifest extends OciDescriptor {\n  readonly mediaType?:\n    | 'application/vnd.oci.image.manifest.v1+json'\n    | 'application/vnd.oci.image.index.v1+json';\n  readonly platform: OciPlatform;\n}\n\n/**\n * OCI Image List\n * mediaType is not required.\n * https://github.com/opencontainers/image-spec/blob/main/image-index.md\n */\nexport interface OciImageList {\n  readonly schemaVersion: 2;\n  readonly mediaType?: 'application/vnd.oci.image.index.v1+json';\n  readonly manifests: OciImageListManifest[];\n}\n\nexport interface RegistryRepository {\n  registryHost: string;\n  dockerRepository: string;\n}\n\n/**\n * OCI Image Configuration\n * https://github.com/opencontainers/image-spec/blob/main/config.md\n */\nexport interface ImageConfig {\n  readonly architecture: string;\n}\n"]}