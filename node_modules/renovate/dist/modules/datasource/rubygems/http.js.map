{"version":3,"file":"http.js","sourceRoot":"","sources":["../../../../lib/modules/datasource/rubygems/http.ts"],"names":[],"mappings":";;;AAAA,6CAA0C;AAC1C,0DAAuD;AACvD,2CAA6C;AAE7C,MAAa,YAAa,SAAQ,WAAI;IACjB,WAAW,CAAC,GAAW;QACxC,MAAM,IAAI,GAAG,IAAA,cAAQ,EAAC,GAAG,CAAC,EAAE,IAAI,CAAC;QAEjC,IAAI,IAAI,KAAK,cAAc,EAAE;YAC3B,kFAAkF;YAClF,6DAA6D;YAC7D,MAAM,UAAU,GAAG,GAAG,CAAC;YACvB,OAAO,IAAI,mBAAQ,CAAC,UAAU,CAAC,CAAC;SACjC;QAED,OAAO,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;CACF;AAbD,oCAaC","sourcesContent":["import { Http } from '../../../util/http';\nimport { Throttle } from '../../../util/http/throttle';\nimport { parseUrl } from '../../../util/url';\n\nexport class RubygemsHttp extends Http {\n  protected override getThrottle(url: string): Throttle | null {\n    const host = parseUrl(url)?.host;\n\n    if (host === 'rubygems.org') {\n      // rubygems.org has a rate limit of 10 per second, so we use a more conservative 8\n      // See: https://guides.rubygems.org/rubygems-org-rate-limits/\n      const intervalMs = 125;\n      return new Throttle(intervalMs);\n    }\n\n    return super.getThrottle(url);\n  }\n}\n"]}